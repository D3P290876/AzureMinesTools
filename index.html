<!DOCTYPE html>
<html lang="en">


<head>
  <meta charset="UTF-8">
  <title>Ambrosia and Nihilium Table</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 30px;
      background-color: #1e1e1e;
      color: #fff;
    }


    .table-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
    }


    table {
      border-collapse: collapse;
      width: 300px;
      background-color: #111;
      border: 1px solid #333;
    }


    th,
    td {
      width: 250px;
      border: 1px solid #333;
      padding: 0;
      text-align: left;
    }


    th {
      position: sticky;
      top: 0;
      z-index: 2;
      background: linear-gradient(to right, #666, #999);
      color: white;
      padding: 8px;
    }


    td {
      height: 40px;
    }


    input[type="text"] {
      width: 100%;
      height: 100%;
      border: none;
      background-color: #1c1c1c;
      color: #00d8ff;
      font-size: 15px;
      text-align: center;
      padding: 10px;
      box-sizing: border-box;
    }


    input[type="text"]:focus {
      outline: none;
      background-color: #2a2a2a;
    }


    .add-button {
      margin-top: 10px;
      width: 40px;
      height: 40px;
      background-color: #1c1c1c;
      border: 1px solid #555;
      color: #fff;
      font-size: 24px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: background-color 0.2s;
    }


    .add-button:hover {
      background-color: #2a2a2a;
    }


    th:first-child,
    #ambrosia-table td:first-child,
    #nihilium-table td:first-child {
      white-space: nowrap;
    }


    th:nth-child(2),
    td:nth-child(2) {
      width: 2000px;
    }


    .table-scroll {
      max-height: 500px;
      overflow-y: auto;
      width: fit-content;
      margin-bottom: 10px;
    }


    .table-header {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 8px;
      gap: 12px;
    }


    .table-header img {
      width: 48px;
      height: 48px;
      image-rendering: pixelated;
    }


    /* Reset Finds Button */
    .reset-finds-button {
      position: fixed;
      bottom: 24px;
      left: 24px;
      background: #222;
      color: #fff;
      border: 1px solid #555;
      border-radius: 6px;
      padding: 12px 24px;
      font-size: 16px;
      cursor: pointer;
      z-index: 100;
      transition: background 0.2s;
    }


    .reset-finds-button:hover {
      background: #444;
    }

    /* Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }


    .modal-content {
      background: #222;
      color: #fff;
      padding: 32px 24px;
      border-radius: 10px;
      box-shadow: 0 4px 32px #000a;
      text-align: center;
      min-width: 300px;
    }


    .modal-confirm,
    .modal-cancel {
      margin: 16px 8px 0 8px;
      padding: 8px 20px;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
    }


    .modal-confirm {
      background: #d33;
      color: #fff;
    }


    .modal-cancel {
      background: #444;
      color: #fff;
    }


    .modal-confirm:hover {
      background: #b22;
    }


    .modal-cancel:hover {
      background: #222;
    }
  </style>
</head>


<body>
  <div class="table-wrapper">
    <div class="table-header">
      <img src="../src/Ambrosia.png" alt="Ambrosia">
      <span>Ambrosia Finds Tracker</span>
      <img src="../src/Ambrosia.png" alt="Ambrosia">
    </div>
    <div class="table-scroll">
      <table id="ambrosia-table">
        <tr>
          <th>Ambrosia #</th>
          <th>Date</th>
          <th>Depth</th>
        </tr>
      </table>
    </div>
    <button class="add-button" onclick="addRow('ambrosia')">+</button>
  </div>

  <div class="table-wrapper">
    <div class="table-header">
      <img src="../src/Nihilium.png" alt="Nihilium">
      <span>Nihilium Finds Tracker</span>
      <img src="../src/Nihilium.png" alt="Nihilium">
    </div>
    <div class="table-scroll">
      <table id="nihilium-table">
        <tr>
          <th>Nihilium #</th>
          <th>Date</th>
          <th>Depth</th>
        </tr>
      </table>
    </div>
    <button class="add-button" onclick="addRow('nihilium')">+</button>
  </div>


  <!-- Reset Finds Button -->
  <button class="reset-finds-button" onclick="showResetModal()">Reset Finds</button>

  <!-- Custom Modal -->
  <div id="reset-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content">
      <p>NOTICE: Are you sure you want to reset all finds? This will clear both tables and all saved data.</p>
      <button onclick="doReset()" class="modal-confirm">Yes, Reset</button>
      <button onclick="hideResetModal()" class="modal-cancel">Cancel</button>
    </div>
  </div>

  <script>
    let ambrosiaCount = parseInt(localStorage.getItem("ambrosiaCount")) || 50;
    let nihiliumCount = parseInt(localStorage.getItem("nihiliumCount")) || 50;


    const ambrosiaTable = document.getElementById('ambrosia-table');
    const nihiliumTable = document.getElementById('nihilium-table');


    function addRow(type) {
      if (type === 'ambrosia') {
        ambrosiaCount++;
        localStorage.setItem("ambrosiaCount", ambrosiaCount);
        renderRow(ambrosiaTable, 'Ambrosia', ambrosiaCount);
      } else {
        nihiliumCount++;
        localStorage.setItem("nihiliumCount", nihiliumCount);
        renderRow(nihiliumTable, 'Nihilium', nihiliumCount);
      }
    }


    function renderRow(table, label, index) {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td style="padding-left: 8px;">${label} #${index}</td>
        <td><input type="text" name="${label.toLowerCase()}-date-${index}" /></td>
        <td><input type="text" name="${label.toLowerCase()}-depth-${index}" /></td>
      `;
      table.appendChild(row);


      // Restore saved values if any
      setTimeout(() => {
        const dateInput = document.getElementsByName(`${label.toLowerCase()}-date-${index}`)[0];
        const depthInput = document.getElementsByName(`${label.toLowerCase()}-depth-${index}`)[0];
        dateInput.value = localStorage.getItem(dateInput.name) || "";
        depthInput.value = localStorage.getItem(depthInput.name) || "";


        dateInput.addEventListener("input", () => {
          localStorage.setItem(dateInput.name, dateInput.value);
        });
        depthInput.addEventListener("input", () => {
          localStorage.setItem(depthInput.name, depthInput.value);
        });
      }, 0);
    }


    // Initial Load
    for (let i = 1; i <= ambrosiaCount; i++) {
      renderRow(ambrosiaTable, 'Ambrosia', i);
    }
    for (let i = 1; i <= nihiliumCount; i++) {
      renderRow(nihiliumTable, 'Nihilium', i);
    }


    function showResetModal() {
      document.getElementById('reset-modal').style.display = 'flex';
    }
    function hideResetModal() {
      document.getElementById('reset-modal').style.display = 'none';
    }
    function doReset() {
      // Clear localStorage
      localStorage.clear();

      // Remove all rows except headers
      [ambrosiaTable, nihiliumTable].forEach(table => {
        while (table.rows.length > 1) {
          table.deleteRow(1);
        }
      });

      // Reset counts and re-render initial rows
      ambrosiaCount = 50;
      nihiliumCount = 50;
      for (let i = 1; i <= ambrosiaCount; i++) {
        renderRow(ambrosiaTable, 'Ambrosia', i);
      }
      for (let i = 1; i <= nihiliumCount; i++) {
        renderRow(nihiliumTable, 'Nihilium', i);
      }
      hideResetModal();
    }
  </script>
</body>


</html>