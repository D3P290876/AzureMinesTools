<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inventory Tracker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #111;
      color: #fff;
      padding: 20px;
      min-height: 100vh;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
    .content-wrapper {
      width: 100%;
      max-width: 1100px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .flex-row {
      display: flex;
      gap: 32px;
      flex-wrap: wrap;
      justify-content: center;
      width: 100%;
      margin-bottom: 32px;
    }
    .ore-card {
      background: #181a20;
      border-radius: 16px;
      box-shadow: none;
      margin-bottom: 32px;
      padding: 0;
      max-width: 500px;   /* Set a reasonable max width */
      width: 100%;        /* Allow it to shrink on small screens */
      margin-left: auto;  /* Center horizontally */
      margin-right: auto; /* Center horizontally */
      flex: 1 1 350px;
      overflow: hidden; /* Ensures header corners are rounded */
    }
    .ore-header {
      display: block;
      width: 100%;
      border-radius: 0; /* Remove header's own radius */
      font-size: 1.2em;
      font-weight: bold;
      padding: 16px 0 12px 0;
      margin-bottom: 0;
      text-align: center;
      letter-spacing: 1px;
      color: #fff;
    }
    .limited-ores {
      background: linear-gradient(to bottom, #783f04ff 0%, #f48108ff 50%, #783f04ff 100%);
    }
    .special-ores {
      background: linear-gradient(to bottom, #a6a6a6ff 0%, #f2f2f2ff 50%, #a6a6a6ff 100%);
      color: black !important;
    }
    .market-ores {
      background: linear-gradient(to bottom, #ff9900ff 0%, #f1ee1cff 25%, #efff4bff 50%, #f1ee1cff 75%, #ff9900ff 100%);
      color: black !important;
    }
    .scary-caverns {
      background: linear-gradient(to bottom, #000000ff 0%, #7a7a7aff 50%, #000000ff 100%);
    }
    .azure-caverns {
      background: linear-gradient(to bottom, #073763ff 0%, #3176eeff 50%, #073763ff 100%);
    }
    .underworld {
      background: linear-gradient(to bottom, #800000ff 0%, #db0000ff 50%, #800000ff 100%);
    }
    .radioactive-zone {
      background: linear-gradient(to bottom, #274e13ff 0%, #51ab2aff 50%, #274e13ff 100%);
    }
    .dreamscape {
      background: linear-gradient(to bottom, #351c75ff 0%, #674ea7ff 50%, #351c75ff 100%);
    }
    .ore-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      background: #23242a;
      border-radius: 0 0 16px 16px;
      overflow: hidden;
      margin: 0;
    }
    .ore-table th, .ore-table td {
      padding: 0;           /* Remove extra space */
      height: 100%;         /* Make cell take full height */
      text-align: center;
      border-bottom: 1px solid #222;
      font-size: 1em;
    }
    .ore-table th {
      background: #23242a;
      font-weight: bold;
      border-bottom: 2px solid #333;
      color: #7ecbff;
      font-size: 1.05em;
    }
    .ore-table tr:last-child td {
      border-bottom: none;
    }
    .ore-table input[type="text"],
    .ore-table input[type="number"] {
      width: 90px;           /* Fixed width, adjust as needed */
      height: 35px;          /* Fixed height */
      box-sizing: border-box;
      background: #181a20;
      color: #fff;
      border: 1px solid #333;
      border-radius: 6px;
      padding: 4px;
      text-align: center;
      min-width: 0;
      min-height: 0;
    }
    .ore-table .ore-name {
      font-weight: bold;
      color: #7ecbff;
      text-align: left;
      padding-left: 16px;
    }
    .ore-img {
      height: 22px;
      width: 22px;
      margin-left: 8px;
      vertical-align: middle;
      image-rendering: auto;
      border-radius: 4px;
      background: #222;
    }

    /* Hide number input spin buttons in Chrome, Safari, Edge */
    .ore-table input[type="number"]::-webkit-outer-spin-button,
    .ore-table input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    /* Hide number input spin buttons in Firefox */
    .ore-table input[type="number"] {
      appearance: textfield;
      -moz-appearance: textfield;
    }

    body, .ore-card, .ore-header, .ore-table th, .ore-table td {
      white-space: nowrap;
    }
  </style>
  <script src="../OreValues.js"></script>
</head>
<body>
  <div class="content-wrapper" id="ore-sections"></div>
  <script>
    // Section definitions
    const sections = [
      {
        name: "Limited Ores",
        ores: [
          "Pumpkinite", "Sinistyte M", "Sinistyte L", "Sinistyte S", "Sinistyte E",
          "Nightmarium", "Twitchite", "Frostarium", "Giftium", "Frawstbyte",
          "Gingerbreadium", "Peppermintium", "Noobite"
        ]
      },
      {
        name: "Special Ores",
        ores: [
          "Garnet", "Moonstone", "Kappa", "Tungsten", "Titanium", "Element V",
          "Havium", "Valhalum", "Nihilium", "Ambrosia"
        ]
      },
      {
        name: "Market Ores",
        ores: [
          "Stone", "Coal", "Iron", "Gold", "Copper", "Silver", "Topaz", "Sulfur",
          "Sapphire", "Ruby", "Emerald", "Diamond", "Opal", "Boomite", "Uranium", "Serendibite"
        ]
      },
      {
        name: "Scary Caverns - 600m",
        ores: [
          "Amethyst", "Platinum", "Shadow Metal", "Illuminunium"
        ]
      },
      {
        name: "Azure Caverns - 1000m",
        ores: [
          "Plutonium", "Baryte", "Rainbonite", "Orichalcum", "Alexandrite", "Azure", "Mithril"
        ]
      },
      {
        name: "Underworld - 2000m",
        ores: [
          "Nullstone", "Dragonglass", "Painite", "Soulstone", "Firecrystal", "Symmetrium"
        ]
      },
      {
        name: "Radioactive Zone - 3000m",
        ores: [
          "Dragonstone", "Promethium", "Newtonium", "Corium", "Yunium", "Solarium"
        ]
      },
      {
        name: "Dreamscape / Abyss - 4000m+",
        ores: [
          "Frightstone", "Redmatter", "Darkmatter", "Antimatter", "Stellarite", "Constellatium", "Mightstone"
        ]
      }
    ];

    // Map section names to gradient classes
    function getHeaderClass(sectionName) {
      if (sectionName.startsWith("Limited Ores")) return "limited-ores";
      if (sectionName.startsWith("Special Ores")) return "special-ores";
      if (sectionName.startsWith("Market Ores")) return "market-ores";
      if (sectionName.startsWith("Scary Caverns")) return "scary-caverns";
      if (sectionName.startsWith("Azure Caverns")) return "azure-caverns";
      if (sectionName.startsWith("Underworld")) return "underworld";
      if (sectionName.startsWith("Radioactive Zone")) return "radioactive-zone";
      if (sectionName.startsWith("Dreamscape")) return "dreamscape";
      return "";
    }

    // Helper to get AV from oreValues, fallback to blank if not found
    function getAV(ore) {
      return (window.oreValues && ore in oreValues) ? window.oreValues[ore].AV : "";
    }

    // Render one section per row
    function renderSections(sections) {
      let html = "";
      for (let i = 0; i < sections.length; i++) {
        html += `<div class="flex-row">`;
        const section = sections[i];
        html += `<div class="ore-card">
          <div class="ore-header ${getHeaderClass(section.name)}">${section.name}</div>
          <table class="ore-table">
            <tr><th>Ore</th><th>Inventory</th><th>Ore per AV</th><th>Total AV</th></tr>`;
        for (const [oreIndex, ore] of section.ores.entries()) {
          const inputId = `inv-${i}-${oreIndex}`;
          const avId = `av-${i}-${oreIndex}`;
          html += `<tr>
            <td class="ore-name">
              <img src="../src/${ore.replace(/ /g, "%20")}.png" alt="${ore}" class="ore-img">
              ${ore}
            </td>
            <td><input type="number" min="0" id="${inputId}" data-ore="${ore}" data-av-id="${avId}"></td>
            <td>${getAV(ore)}</td>
            <td id="${avId}">0.00</td>
          </tr>`;
        }
        html += `</table></div>`;
        html += `</div>`;
      }
      return html;
    }

    console.log(window.oreValues); // Should show your ore values object
    document.getElementById('ore-sections').innerHTML = renderSections(sections);

    // Add event listeners to all inventory inputs
    document.querySelectorAll('input[type="number"][data-ore]').forEach(input => {
      input.addEventListener('input', function() {
        const ore = this.getAttribute('data-ore');
        const avId = this.getAttribute('data-av-id');
        const av = window.oreValues && window.oreValues[ore] ? window.oreValues[ore].AV : null;
        const value = parseFloat(this.value);
        let total = 0;
        if (av && value > 0) {
          total = value / av;
        }
        document.getElementById(avId).textContent = total.toFixed(2);
      });
    });
  </script>
</body>
</html>
